{% extends 'basic.html' %}
{% load static %}
{% block title %} Library Management System {% endblock %}
{% block css %}
<style>
    .registration-form {
        max-width: 800px;
        margin: 0 auto;
        padding: 20px;
        box-shadow: 0 0 10px rgba(0,0,0,0.1);
        border-radius: 5px;
        background-color: #fff;
    }
    .form-title {
        margin-bottom: 30px;
    }
</style>
{% endblock %}
{% block body %}
<div class="container mt-4 mb-5">
    <div class="registration-form">
        <form method="POST" enctype="multipart/form-data"> {% csrf_token %}
            {% csrf_token %}
            <h1 class="text-center form-title"><u>Student Registration</u></h1>
            
            {% if messages %}
                <div class="messages">
                    {% for message in messages %}
                        <div class="alert {% if message.tags == 'error' %}alert-danger{% else %}alert-{{ message.tags }}{% endif %} alert-dismissible fade show" role="alert">
                            {{ message }}
                            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                        </div>
                    {% endfor %}
                </div>
            {% endif %}
            
            <div class="row mt-4">
                <div class="form-group col-md-12">
                    <label><i style="font-weight: bold;">Username</i></label>
                    <input type="text" class="form-control mt-2" name="username" placeholder="Enter Username" required>
                </div>
            </div>

            <div class="row mt-4">
                <div class="form-group col-md-6">
                    <label><i style="font-weight: bold;">First Name</i></label>
                    <input type="text" class="form-control mt-2" name="first_name" placeholder="Enter First Name" required>
                </div>
                <div class="form-group col-md-6">
                    <label><i style="font-weight: bold;">Last Name</i></label>
                    <input type="text" class="form-control mt-2" name="last_name" placeholder="Enter Last Name" required>
                </div>
            </div>

            <div class="row mt-4">
                <div class="form-group col-md-6">
                    <label><i style="font-weight: bold;">Email</i></label>
                    <input type="email" class="form-control mt-2" name="email" placeholder="Enter Email" required>
                </div>
                <div class="form-group col-md-6">
                    <label><i style="font-weight: bold;">Mobile Number</i></label>
                    <input type="number" class="form-control mt-2" name="phone" placeholder="Enter Mobile Number" required>
                </div>
            </div>

            <div class="row mt-4">
                <div class="form-group col-md-6">
                    <label><i style="font-weight: bold;">Branch Name</i></label>
                    <input type="text" class="form-control mt-2" name="branch" placeholder="Enter Branch Name" required>
                </div>
                <div class="form-group col-md-6">
                    <label><i style="font-weight: bold;">Class Name</i></label>
                    <input type="text" class="form-control mt-2" name="classroom" placeholder="Enter Class Name" required>
                </div>
            </div>

            <div class="row mt-4">
                <div class="form-group col-md-12">
                    <label><i style="font-weight: bold;">Roll Number</i></label>
                    <input type="text" class="form-control mt-2" name="roll_no" placeholder="Enter Roll Number" required>
                </div>
            </div>

            <div class="row mt-4">
                <div class="form-group col-md-6">
                    <label><i style="font-weight: bold;">Password</i></label>
                    <input type="password" class="form-control mt-2" name="password" placeholder="Enter Password" required>
                    <small class="form-text text-muted">Password must be at least 8 characters long.</small>
                </div>
                <div class="form-group col-md-6">
                    <label><i style="font-weight: bold;">Confirm Password</i></label>
                    <input type="password" class="form-control mt-2" name="confirm_password" placeholder="Confirm Password" required>
                </div>
            </div>

            <div class="row mt-4">
                <div class="form-group col-md-12">
                    <label><i style="font-weight: bold;">Profile Image</i></label>
                    <input type="file" class="form-control mt-2" name="image">
                </div>
            </div>
            
            <div class="text-center">
                <button type="submit" class="btn btn-outline-primary mt-4">Register</button>
            </div>
            
            <div class="mt-4 text-center">
                <p>Already have an account? <a href="{% url 'student_login' %}">Login here</a></p>
            </div>
        </form>
    </div>
</div>
{% endblock %}
{% block js %}
<script>
    // Password match validation
    const password = document.querySelector('input[name="password"]');
    const confirmPassword = document.querySelector('input[name="confirm_password"]');
    const form = document.querySelector('form');
    
    form.addEventListener('submit', function(event) {
        if (password.value !== confirmPassword.value) {
            event.preventDefault();
            alert("Passwords do not match!");
        }
    });
</script>
{% endblock %}
